<p-card>
    <ng-template pTemplate="header">
        <app-header [isEdicion]="false" [titulo]="titulo" [ruta]="ruta" ></app-header>
    </ng-template>

    <div class="card">
        <p-table [value]="tasks" #dt1 dataKey="id" >
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="id">
                        ID
                        <p-sortIcon field="id"></p-sortIcon>
                        <p-columnFilter type="text" field="id" display="menu"></p-columnFilter>
                    </th>

                    <th pSortableColumn="titulo">
                        Titulo
                        <p-sortIcon field="titulo"></p-sortIcon>
                        <p-columnFilter type="text" field="titulo" display="menu"></p-columnFilter>
                    </th>
                    
                    <th pSortableColumn="fechaCreacion">
                        Fecha de Creaci√≥n
                        <p-sortIcon field="fechaCreacion"></p-sortIcon>
                        <p-columnFilter type="text" field="fechaCreacion" display="menu"></p-columnFilter>
                    </th>

                    <th pSortableColumn="descripcion">
                        Descripcion
                        <p-sortIcon field="descripcion"></p-sortIcon>
                        <p-columnFilter type="text" field="descripcion" display="menu"></p-columnFilter>
                    </th>

                    <th pSortableColumn="nivelPrioridad">
                        Nivel de Prioridad
                        <p-sortIcon field="nivelPrioridad"></p-sortIcon>
                        <p-columnFilter type="text" field="nivelPrioridad" display="menu"></p-columnFilter>
                    </th>

                    <th pSortableColumn="status">
                        Status
                        <p-sortIcon field="status"></p-sortIcon>
                        <p-columnFilter type="text" field="status" display="menu"></p-columnFilter>
                    </th>
                    
                    <th>Opciones</th>
                </tr>
            </ng-template>


            <ng-template pTemplate="body" let-task>
                <tr>
                    <td>{{task.id}}</td>
                    <td>{{task.titulo}}</td>
                    <td>{{task.fechaCreacion}}</td>
                    <td>{{task.descripcion}}</td>
                    <td>{{task.nivelPrioridad}}</td>
                    <td>{{task.status}}</td>
                    <td>
                        <button pButton pRipple icon="pi pi-ellipsis-h" [routerLink]="['/task', task.id]"  class="p-button-rounded p-button-success p-mr-2" ></button>
                        <button pButton pRipple icon="pi pi-trash" (click)="delete(task.id)" class="p-button-rounded p-button-warning"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    
    
</p-card>

<p-confirmDialog header="DELETE TASK"  icon="pi pi-exclamation-triangle" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}"></p-confirmDialog>

<p-dialog header="Error" [(visible)]="display" icon="pi pi-exclamation-triangle">
    <p>No se ha podido eliminar</p>

    <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" (click)="display=false" label="Ok" styleClass="p-button-text"></p-button>
    </ng-template>
    
</p-dialog>
